{"version":3,"file":"storage.js","sources":["common/storage.ts"],"sourcesContent":["import constant from './constant';\n\nconst getToken = () => {\n    return uni.getStorageSync(constant.local_storage_token);\n};\n\nconst setToken = (token: string) => {\n    uni.setStorageSync(constant.local_storage_token, token);\n    uni.$emit('storage-changed');\n};\n\nconst clearToken = () => {\n    uni.removeStorageSync(constant.local_storage_token);\n    uni.$emit('storage-changed');\n};\n\nconst clearUserInfo = () => {\n    uni.removeStorageSync(constant.local_storage_user_info);\n};\n\nconst clearApplicationInfo = () => {\n    uni.removeStorageSync(constant.local_storage_application_info);\n    uni.$emit('storage-changed');\n};\n\nconst clearAll = () => {\n    clearToken();\n    clearUserInfo();\n    clearApplicationInfo();\n    uni.$emit('storage-changed');\n};\n\nconst getUserInfo = () => {\n    return JSON.parse(uni.getStorageSync(constant.local_storage_user_info) || '{}');\n};\n\nconst setUserInfo = (userInfo: Object) => {\n    uni.setStorageSync(\n        constant.local_storage_user_info,\n        JSON.stringify(userInfo)\n    );\n    uni.$emit('storage-changed');\n};\n\ninterface ApplicationInfo {\n    id: string;\n    name: string;\n    uploadType: string;\n}\n\nconst getApplicationInfo = (): ApplicationInfo | null => {\n    return JSON.parse(\n        uni.getStorageSync(constant.local_storage_application_info) || '{}'\n    );\n};\n\nconst setApplicationInfo = (applicationInfo: {\n    id: string;\n    name: string;\n    uploadType: string;\n}) => {\n    uni.setStorageSync(\n        constant.local_storage_application_info,\n        JSON.stringify(applicationInfo)\n    );\n    uni.$emit('storage-changed');\n};\n\nexport {\n    getToken,\n    setToken,\n    clearToken,\n    getUserInfo,\n    setUserInfo,\n    getApplicationInfo,\n    setApplicationInfo,\n    clearAll\n};\n"],"names":["uni","constant"],"mappings":";;;AAEA,MAAM,WAAW,MAAM;AACZ,SAAAA,oBAAI,eAAeC,gBAAA,SAAS,mBAAmB;AAC1D;AAEM,MAAA,WAAW,CAAC,UAAkB;AAC5BD,gBAAAA,MAAA,eAAeC,gBAAAA,SAAS,qBAAqB,KAAK;AACtDD,sBAAI,MAAM,iBAAiB;AAC/B;AAEA,MAAM,aAAa,MAAM;AACjBA,gBAAAA,MAAA,kBAAkBC,yBAAS,mBAAmB;AAClDD,sBAAI,MAAM,iBAAiB;AAC/B;AAEA,MAAM,gBAAgB,MAAM;AACpBA,gBAAAA,MAAA,kBAAkBC,yBAAS,uBAAuB;AAC1D;AAEA,MAAM,uBAAuB,MAAM;AAC3BD,gBAAAA,MAAA,kBAAkBC,yBAAS,8BAA8B;AAC7DD,sBAAI,MAAM,iBAAiB;AAC/B;AAEA,MAAM,WAAW,MAAM;AACR;AACG;AACO;AACrBA,sBAAI,MAAM,iBAAiB;AAC/B;AAEA,MAAM,cAAc,MAAM;AACtB,SAAO,KAAK,MAAMA,oBAAI,eAAeC,gBAAAA,SAAS,uBAAuB,KAAK,IAAI;AAClF;AAEM,MAAA,cAAc,CAAC,aAAqB;AAClCD,gBAAAA,MAAA;AAAA,IACAC,gBAAAA,SAAS;AAAA,IACT,KAAK,UAAU,QAAQ;AAAA,EAAA;AAE3BD,sBAAI,MAAM,iBAAiB;AAC/B;AAQA,MAAM,qBAAqB,MAA8B;AACrD,SAAO,KAAK;AAAA,IACRA,cAAAA,MAAI,eAAeC,yBAAS,8BAA8B,KAAK;AAAA,EAAA;AAEvE;AAEM,MAAA,qBAAqB,CAAC,oBAItB;AACED,gBAAAA,MAAA;AAAA,IACAC,gBAAAA,SAAS;AAAA,IACT,KAAK,UAAU,eAAe;AAAA,EAAA;AAElCD,sBAAI,MAAM,iBAAiB;AAC/B;;;;;;;;"}