{"version":3,"names":["tabs","label","tradeStatus","activeTab","common_vendor","ref","orderList","fetchOrders","value","api_order","orderAPI","query","then","res","records","changeTab","idx","onLoad","options","findIndex","tab","String","wx","createPage","MiniProgramPage"],"sources":["order-list.vue","order-list.vue?type=page"],"sourcesContent":["<template>\r\n\t\t<custom-navigation-bar :back=\"true\" position=\"flex\" />\r\n\r\n  <view>\r\n    <view class=\"tabs\">\r\n      <view\r\n        v-for=\"(tab, idx) in tabs\"\r\n        :key=\"tab.tradeStatus\"\r\n        :class=\"['tab', { active: idx === activeTab } ]\"\r\n        @tap=\"changeTab(idx)\"\r\n      >\r\n        {{ tab.label }}\r\n      </view>\r\n    </view>\r\n    <view class=\"order-list\">\r\n      <view v-for=\"order in orderList\" :key=\"order.sn\" class=\"order-item\">\r\n        <view class=\"order-header\">\r\n          <text>订单编号：{{ order.sn }}</text>\r\n          <text class=\"order-date\">{{ order.createdAt }}</text>\r\n        </view>\r\n        <view class=\"order-goods\">\r\n          <view v-for=\"sku in order.orderSku\" :key=\"sku.id\" class=\"goods-item\">\r\n            <image v-if=\"sku?.theme?.posterUrl\" :src=\"sku?.theme?.posterUrl\" class=\"goods-img\" mode=\"aspectFill\" />\r\n            <view class=\"goods-info\">\r\n              <text class=\"goods-name\">{{ sku.ticket.name }}</text>\r\n              <text class=\"goods-qty\">x{{ sku.quantity }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view class=\"order-footer\">\r\n          <text>实付金额：</text>\r\n          <text class=\"order-amount\">￥{{ order.amountPaid }}</text>\r\n        </view>\r\n      </view>\r\n      <view v-if=\"orderList.length === 0\" class=\"empty\">暂无订单</view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { ref } from 'vue'\r\nimport { order as orderAPI } from '@/api'\r\n\r\nconst tabs = [\r\n  { label: '待付款', tradeStatus: 10 },\r\n  { label: '已付款', tradeStatus: 40 },\r\n  { label: '退款/售后', tradeStatus: 51 }\r\n]\r\nconst activeTab = ref(0)\r\nconst orderList = ref([])\r\n\r\n// 获取订单列表\r\nfunction fetchOrders() {\r\n  const tradeStatus = tabs[activeTab.value].tradeStatus\r\n  orderAPI.query({ tradeStatus }).then(res => {\r\n    orderList.value = res?.records || []\r\n  })\r\n}\r\n\r\n// 切换tab并刷新订单列表\r\nfunction changeTab(idx) {\r\n  activeTab.value = idx\r\n  fetchOrders()\r\n}\r\n\r\n// 页面加载时处理跳转参数并拉取订单\r\nonLoad((options) => {\r\n  if (options && options.tradeStatus) {\r\n    const idx = tabs.findIndex(tab => String(tab.tradeStatus) === String(options.tradeStatus))\r\n    if (idx !== -1) {\r\n      activeTab.value = idx\r\n    }\r\n  }\r\n  fetchOrders()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.tabs {\r\n  display: flex;\r\n  background: #fff;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.tab {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 24rpx 0;\r\n  font-size: 30rpx;\r\n  color: #888;\r\n}\r\n.tab.active {\r\n  color: #333;\r\n  border-bottom: 4rpx solid #007aff;\r\n}\r\n.order-list {\r\n  padding: 24rpx;\r\n}\r\n.order-item {\r\n  background: #fff;\r\n  margin-bottom: 24rpx;\r\n  border-radius: 16rpx;\r\n  box-shadow: 0 2rpx 8rpx #f0f1f2;\r\n  padding: 24rpx;\r\n}\r\n.order-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  margin-bottom: 16rpx;\r\n}\r\n.order-goods {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n  margin-bottom: 16rpx;\r\n}\r\n.goods-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.goods-img {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 8rpx;\r\n  margin-right: 16rpx;\r\n  background: #f5f5f5;\r\n}\r\n.goods-info {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.goods-name {\r\n  font-size: 28rpx;\r\n  color: #222;\r\n}\r\n.goods-qty {\r\n  font-size: 26rpx;\r\n  color: #888;\r\n}\r\n.order-footer {\r\n  text-align: right;\r\n  font-size: 28rpx;\r\n  color: #333;\r\n}\r\n.order-amount {\r\n  color: #e64340;\r\n  font-weight: bold;\r\n  margin-left: 8rpx;\r\n}\r\n.empty {\r\n  text-align: center;\r\n  color: #bbb;\r\n  margin-top: 80rpx;\r\n  font-size: 28rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from '/Users/wangshuli/workspace/mine/pighand/pighand-AIO/client-applet/pages/ECommerce/pages/order-list.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;IA4CA,IAAMA,IAAA,GAAO,CACX;MAAEC,KAAA,EAAO;MAAOC,WAAA,EAAa;IAAI,GACjC;MAAED,KAAA,EAAO;MAAOC,WAAA,EAAa;IAAI,GACjC;MAAED,KAAA,EAAO;MAASC,WAAA,EAAa;IAAI,EACrC;IACA,IAAMC,SAAA,GAAYC,aAAA,CAAGC,GAAA,CAAC,CAAC;IACvB,IAAMC,SAAA,GAAYF,aAAA,CAAGC,GAAA,CAAC,EAAE;IAGxB,SAASE,YAAA,EAAc;MACrB,IAAML,WAAA,GAAcF,IAAA,CAAKG,SAAA,CAAUK,KAAK,EAAEN,WAAA;MAC1CO,SAAA,CAAQC,QAAA,CAACC,KAAA,CAAM;QAAET,WAAA,EAAAA;MAAa,GAAEU,IAAA,CAAK,UAAAC,GAAA,EAAO;QAC1CP,SAAA,CAAUE,KAAA,IAAQK,GAAA,oBAAAA,GAAA,CAAKC,OAAA,KAAW,EAAE;MACxC,CAAG;IACH;IAGA,SAASC,UAAUC,GAAA,EAAK;MACtBb,SAAA,CAAUK,KAAA,GAAQQ,GAAA;MAClBT,WAAA,EAAa;IACf;IAGAH,aAAA,CAAMa,MAAA,CAAC,UAACC,OAAA,EAAY;MAClB,IAAIA,OAAA,IAAWA,OAAA,CAAQhB,WAAA,EAAa;QAClC,IAAMc,GAAA,GAAMhB,IAAA,CAAKmB,SAAA,CAAU,UAAAC,GAAA;UAAA,OAAOC,MAAA,CAAOD,GAAA,CAAIlB,WAAW,MAAMmB,MAAA,CAAOH,OAAA,CAAQhB,WAAW,CAAC;QAAA;QACzF,IAAIc,GAAA,KAAQ,IAAI;UACdb,SAAA,CAAUK,KAAA,GAAQQ,GAAA;QACnB;MACF;MACDT,WAAA,EAAa;IACf,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EDe,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}