{"version":3,"file":"check.js","sources":["components/user/check.vue","/Users/wangshuli/workspace/mine/pighand/pighand-AIO/client-applet/components/user/check.vue?type=component"],"sourcesContent":["<template>\n    <view class=\"login-wrapper\">\n        <user-login v-if=\"needLogin\"><slot/></user-login>\n        <user-phone v-else-if=\"needPhone\">{{ userInfo.phone }}<slot/></user-phone>\n        <user-avatar v-else-if=\"needAvatar\">{{ userInfo.avatar }}<slot/></user-avatar>\n\t\t<view v-else><slot/></view>\n    </view>\n</template>\n\n<script setup>\nimport {getToken, getUserInfo} from '@/common/storage'\nimport { ref, computed, onUnmounted } from 'vue'\n\n// 将状态转换为响应式\nconst token = ref(getToken())\nconst userInfo = ref(getUserInfo())\n\nconst props = defineProps({\n    item: {\n        type: Array,\n        default: () => ['login', 'phone', 'avatar']\n    }\n})\n\n// 监听storage变化\nconst handleStorageChange = () => {\n    token.value = getToken()\n    userInfo.value = getUserInfo()\n}\n\nuni.$on('storage-changed', handleStorageChange)\n\n// 组件卸载时移除事件监听\nonUnmounted(() => {\n    uni.$off('storage-changed', handleStorageChange)\n})\n\n// 使用计算属性来依赖响应式数据\nconst needLogin = computed(() => (!token.value || !userInfo?.value) && props.item.includes('login'))\nconst needPhone = computed(() => !userInfo.value?.phone && props.item.includes('phone'))\nconst needAvatar = computed(() => !userInfo.value?.avatar && props.item.includes('avatar'))\n</script>","import Component from '/Users/wangshuli/workspace/mine/pighand/pighand-AIO/client-applet/components/user/check.vue'\nwx.createComponent(Component)"],"names":["ref","getToken","getUserInfo","uni","onUnmounted","computed","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAcA,UAAM,QAAQA,cAAAA,IAAIC,eAAAA,UAAU;AAC5B,UAAM,WAAWD,cAAAA,IAAIE,eAAAA,aAAa;AAElC,UAAM,QAAQ;AAQd,UAAM,sBAAsB,MAAM;AAC9B,YAAM,QAAQD,wBAAU;AACxB,eAAS,QAAQC,2BAAa;AAAA,IAClC;AAEAC,kBAAAA,MAAI,IAAI,mBAAmB,mBAAmB;AAG9CC,kBAAAA,YAAY,MAAM;AACdD,0BAAI,KAAK,mBAAmB,mBAAmB;AAAA,IACnD,CAAC;AAGD,UAAM,YAAYE,cAAAA,SAAS,OAAO,CAAC,MAAM,SAAS,EAAC,qCAAU,WAAU,MAAM,KAAK,SAAS,OAAO,CAAC;AACnG,UAAM,YAAYA,cAAQ,SAAC;;AAAM,gBAAC,cAAS,UAAT,mBAAgB,UAAS,MAAM,KAAK,SAAS,OAAO;AAAA,KAAC;AACvF,UAAM,aAAaA,cAAQ,SAAC;;AAAM,gBAAC,cAAS,UAAT,mBAAgB,WAAU,MAAM,KAAK,SAAS,QAAQ;AAAA,KAAC;;;;;;;;;;;;;;;ACvC1F,GAAG,gBAAgBC,SAAS;"}