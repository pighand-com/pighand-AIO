{"version":3,"file":"order-detail.js","sources":["pages/ECommerce/pages/order-detail.vue","pages/ECommerce/pages/order-detail.vue?type=page"],"sourcesContent":["<template>\r\n  <view class=\"page-container\">\r\n    <custom-navigation-bar :back=\"true\" position=\"flex\" title=\"订单详情\" />\r\n    \r\n    <!-- 订单状态卡片 -->\r\n    <view class=\"status-card\">\r\n      <view class=\"status-info\">\r\n        <text class=\"status-text\">{{ getStatusText(orderDetail.tradeStatus) }}</text>\r\n        <text class=\"status-desc\">{{ getStatusDesc(orderDetail.tradeStatus) }}</text>\r\n        <view v-if=\"orderDetail.tradeStatus === 10 && orderDetail.expiredAt\" class=\"countdown-container\">\r\n          <text class=\"countdown-label\">支付剩余时间：</text>\r\n          <text class=\"countdown-time\">{{ countdownText }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 订单信息 -->\r\n    <view class=\"order-info-card\">\r\n      <view class=\"card-header\">\r\n        <text class=\"card-title\">订单信息</text>\r\n      </view>\r\n      <view class=\"info-item\">\r\n        <text class=\"info-label\">订单编号</text>\r\n        <text class=\"info-value\" @longpress=\"copyOrderSn(orderDetail.sn)\">{{ orderDetail.sn }}</text>\r\n      </view>\r\n      <view class=\"info-item\">\r\n        <text class=\"info-label\">下单时间</text>\r\n        <text class=\"info-value\">{{ formatDate(orderDetail.createdAt) }}</text>\r\n      </view>\r\n      <view class=\"info-item\" v-if=\"orderDetail.paymentTime\">\r\n        <text class=\"info-label\">支付时间</text>\r\n        <text class=\"info-value\">{{ formatDate(orderDetail.paymentTime) }}</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 商品信息 -->\r\n    <view class=\"goods-card\">\r\n      <view class=\"card-header\">\r\n        <text class=\"card-title\">商品信息</text>\r\n      </view>\r\n      <view class=\"goods-list\">\r\n        <view v-for=\"(ticket, index) in orderDetail.ticket\" :key=\"ticket.id + '_' + index\" class=\"goods-item\">\r\n          <view class=\"goods-img-container\">\r\n            <image \r\n              v-if=\"ticket?.theme?.posterUrl\" \r\n              :src=\"ticket?.theme?.posterUrl\" \r\n              class=\"goods-img\" \r\n              mode=\"aspectFill\" \r\n            />\r\n            <view v-else class=\"goods-img-placeholder\">\r\n              <text class=\"placeholder-text\">暂无图片</text>\r\n            </view>\r\n          </view>\r\n          <view class=\"goods-info\">\r\n            <text class=\"goods-name\">{{ ticket?.name || '未知商品' }}</text>\r\n            <text class=\"goods-qty\">数量：{{ getTicketQuantityFromMap(orderDetail, ticket.id) }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- 实付金额 -->\r\n    <view class=\"amount-card\">\r\n      <!-- 退款/售后状态下显示退款金额和实付金额 -->\r\n      <template v-if=\"orderDetail.tradeStatus === 51\">\r\n        <view class=\"amount-item\">\r\n          <text class=\"amount-label\">实付金额</text>\r\n          <text class=\"amount-value paid-amount\">￥{{ formatAmount(orderDetail.amountPaid) }}</text>\r\n        </view>\r\n        <view class=\"amount-item total\">\r\n          <text class=\"amount-label\">退款金额</text>\r\n          <text class=\"amount-value final refund-amount\">￥{{ formatAmount(orderDetail.refundAmount) }}</text>\r\n        </view>\r\n      </template>\r\n      <!-- 其他状态只显示对应金额 -->\r\n      <template v-else>\r\n        <view class=\"amount-item total\">\r\n          <text class=\"amount-label\">{{ orderDetail.tradeStatus === 10 ? '应付金额' : '实付金额' }}</text>\r\n          <text class=\"amount-value final paid-amount\">￥{{ formatAmount(orderDetail.amountPaid) }}</text>\r\n        </view>\r\n      </template>\r\n    </view>\r\n    \r\n    <!-- 操作按钮 -->\r\n    <view class=\"action-buttons\" v-if=\"showActionButtons\">\r\n      <view class=\"button-group\">\r\n        <view \r\n          v-if=\"orderDetail.tradeStatus === 10\" \r\n          class=\"action-btn primary\"\r\n          @tap=\"payOrder\"\r\n        >\r\n          <text class=\"btn-text\">立即支付</text>\r\n        </view>\r\n        <view \r\n          v-if=\"orderDetail.tradeStatus === 10\" \r\n          class=\"action-btn secondary\"\r\n          @tap=\"cancelOrder\"\r\n        >\r\n          <text class=\"btn-text\">取消订单</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { order as orderAPI } from '@/api'\r\nimport Decimal from 'decimal.js'\r\n\r\n// 订单详情数据\r\nconst orderDetail = ref({})\r\nconst loading = ref(false)\r\nconst isPaying = ref(false)\r\n\r\n// 倒计时相关\r\nconst countdownText = ref('')\r\nlet countdownTimer = null\r\n\r\n// 计算属性：是否显示操作按钮\r\nconst showActionButtons = computed(() => {\r\n  // 待付款状态且未过期才显示按钮\r\n  if (orderDetail.value.tradeStatus === 10) {\r\n    // 如果有过期时间，检查是否已过期\r\n    if (orderDetail.value.expiredAt) {\r\n      const now = new Date().getTime()\r\n      const expiredTime = new Date(orderDetail.value.expiredAt).getTime()\r\n      return now < expiredTime\r\n    }\r\n    return true // 如果没有过期时间，默认显示\r\n  }\r\n  return false\r\n})\r\n\r\n// 格式化时间戳为日期\r\nfunction formatDate(timestamp) {\r\n  if (!timestamp) return ''\r\n  const date = new Date(timestamp)\r\n  const year = date.getFullYear()\r\n  const month = String(date.getMonth() + 1).padStart(2, '0')\r\n  const day = String(date.getDate()).padStart(2, '0')\r\n  const hours = String(date.getHours()).padStart(2, '0')\r\n  const minutes = String(date.getMinutes()).padStart(2, '0')\r\n  return `${year}.${month}.${day} ${hours}:${minutes}`\r\n}\r\n\r\n// 获取票券数量\r\nfunction getTicketQuantityFromMap(order, ticketId) {\r\n  if (!order._ticketQuantityMap) {\r\n    order._ticketQuantityMap = new Map()\r\n    order.orderSku?.forEach(sku => {\r\n      if (sku.ticketId) {\r\n        order._ticketQuantityMap.set(sku.ticketId, sku.quantity || 0)\r\n      }\r\n    })\r\n  }\r\n  return order._ticketQuantityMap.get(ticketId) || 0\r\n}\r\n\r\n\r\n\r\n// 获取订单状态文本\r\nfunction getStatusText(tradeStatus) {\r\n  const statusMap = {\r\n    10: '待付款',\r\n    40: '已付款',\r\n    51: '退款/售后'\r\n  }\r\n  return statusMap[tradeStatus] || '未知状态'\r\n}\r\n\r\n// 获取订单状态描述\r\nfunction getStatusDesc(tradeStatus) {\r\n  const statusMap = {\r\n    10: '请尽快完成支付',\r\n    40: '订单已完成支付',\r\n    51: '订单已退款'\r\n  }\r\n  return statusMap[tradeStatus] || ''\r\n}\r\n\r\n// 复制订单编号\r\nfunction copyOrderSn(orderSn) {\r\n  uni.setClipboardData({\r\n    data: orderSn,\r\n    success: () => {\r\n      uni.showToast({\r\n        title: '订单编号已复制',\r\n        icon: 'success',\r\n        duration: 2000\r\n      })\r\n    },\r\n    fail: () => {\r\n      uni.showToast({\r\n        title: '复制失败',\r\n        icon: 'none',\r\n        duration: 2000\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\n// 获取订单详情\r\nfunction fetchOrderDetail(id) {\r\n  if (!id) return\r\n  \r\n  loading.value = true\r\n  return orderAPI.find(id).then(res => {\r\n    orderDetail.value = res || {}\r\n    // 如果是待支付状态，启动倒计时\r\n    if (orderDetail.value.tradeStatus === 10) {\r\n      startCountdown()\r\n    }\r\n    return res\r\n  }).catch(err => {\r\n    console.error('获取订单详情失败:', err)\r\n    uni.showToast({\r\n      title: '获取订单详情失败',\r\n      icon: 'none',\r\n      duration: 2000\r\n    })\r\n  }).finally(() => {\r\n    loading.value = false\r\n  })\r\n}\r\n\r\n// 支付订单\r\nconst payOrder = async () => {\r\n  if (isPaying.value || loading.value) return // 防止重复点击\r\n  \r\n  isPaying.value = true\r\n  loading.value = true // 显示全屏loading\r\n  \r\n  try {\r\n    const result = await orderAPI.pay(orderDetail.value.id, 'wechat_applet');\r\n\r\n    const { nonceStr, prepayId, signType, paySign, timeStamp } = result;\r\n    uni.requestPayment({\r\n      provider:'wxpay',\r\n      timeStamp,\r\n      nonceStr,\r\n      package:`prepay_id=${prepayId}`,\r\n      signType: signType,\r\n      paySign: paySign,\r\n      success(responseData) {\r\n        isPaying.value = false\r\n        loading.value = false\r\n        \r\n        if(responseData.errMsg === 'requestPayment:ok'){\r\n          uni.showToast({\r\n            title: '支付成功！',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          // 支付成功后重新查询订单详情\r\n          setTimeout(() => {\r\n            fetchOrderDetail(orderDetail.value.id)\r\n          }, 2000)\r\n        }else{\r\n          uni.showToast({\r\n            title: '支付取消',\r\n            icon: 'none',\r\n            duration: 2000\r\n          })\r\n        }\r\n      },\r\n      fail(error) {\r\n        isPaying.value = false\r\n        loading.value = false\r\n        \r\n        uni.showToast({\r\n          title: '支付失败',\r\n          icon: 'error',\r\n          duration: 2000\r\n        })\r\n      }\r\n    })\r\n  } catch (error) {\r\n    isPaying.value = false\r\n    loading.value = false\r\n    \r\n    console.error('支付失败:', error)\r\n    uni.showToast({\r\n      title: '支付失败，请重试',\r\n      icon: 'error',\r\n      duration: 2000\r\n    })\r\n  }\r\n}\r\n\r\n// 取消订单\r\nfunction cancelOrder() {\r\n  uni.showModal({\r\n    title: '确认取消',\r\n    content: '确定要取消这个订单吗？',\r\n    success: async (res) => {\r\n      if (res.confirm) {\r\n        try {\r\n          loading.value = true\r\n          await orderAPI.cancel(orderDetail.value.id)\r\n          \r\n          uni.showToast({\r\n            title: '订单已取消',\r\n            icon: 'success',\r\n            duration: 2000\r\n          })\r\n          \r\n          // 延迟返回列表页面\r\n          setTimeout(() => {\r\n            uni.navigateBack()\r\n          }, 2000)\r\n        } catch (error) {\r\n          console.error('取消订单失败:', error)\r\n          uni.showToast({\r\n            title: '取消订单失败，请重试',\r\n            icon: 'error',\r\n            duration: 2000\r\n          })\r\n        } finally {\r\n          loading.value = false\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n// 开始倒计时\r\nfunction startCountdown() {\r\n  // 清除之前的定时器\r\n  if (countdownTimer) {\r\n    clearInterval(countdownTimer)\r\n    countdownTimer = null\r\n  }\r\n  \r\n  // 如果不是待支付状态或没有过期时间，不启动倒计时\r\n  if (orderDetail.value.tradeStatus !== 10 || !orderDetail.value.expiredAt) {\r\n    countdownText.value = ''\r\n    return\r\n  }\r\n  \r\n  // 计算倒计时\r\n  const updateCountdown = () => {\r\n    const now = new Date().getTime()\r\n    const expiredTime = new Date(orderDetail.value.expiredAt).getTime()\r\n    const diff = expiredTime - now\r\n    \r\n    if (diff <= 0) {\r\n      // 已过期\r\n      countdownText.value = '已过期'\r\n      clearInterval(countdownTimer)\r\n      countdownTimer = null\r\n      // 刷新订单状态\r\n      fetchOrderDetail(orderDetail.value.id)\r\n      return\r\n    }\r\n    \r\n    // 计算时分秒\r\n    const hours = Math.floor(diff / (1000 * 60 * 60))\r\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))\r\n    const seconds = Math.floor((diff % (1000 * 60)) / 1000)\r\n    \r\n    // 格式化显示\r\n    countdownText.value = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\r\n  }\r\n  \r\n  // 立即执行一次\r\n  updateCountdown()\r\n  \r\n  // 设置定时器，每秒更新一次\r\n  countdownTimer = setInterval(updateCountdown, 1000)\r\n}\r\n\r\n// 页面加载时获取订单详情\r\nonLoad((options) => {\r\n  if (options && options.id) {\r\n    fetchOrderDetail(options.id).then(() => {\r\n      // 获取订单详情后启动倒计时\r\n      startCountdown()\r\n    })\r\n  } else {\r\n    uni.showToast({\r\n      title: '订单编号不能为空',\r\n      icon: 'none',\r\n      duration: 2000\r\n    })\r\n    setTimeout(() => {\r\n      uni.navigateBack()\r\n    }, 2000)\r\n  }\r\n})\r\n\r\n// 将分转换为元\r\nfunction formatAmount(amountInCents) {\r\n  if (!amountInCents && amountInCents !== 0) return '0.00'\r\n  return new Decimal(amountInCents).div(100).toFixed(2)\r\n}\r\n\r\n// 组件卸载时清除定时器\r\nonUnmounted(() => {\r\n  if (countdownTimer) {\r\n    clearInterval(countdownTimer)\r\n    countdownTimer = null\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* 页面容器 */\r\n.page-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);\r\n  padding-bottom: 120rpx;\r\n}\r\n\r\n/* 状态卡片 */\r\n.status-card {\r\n  margin: 32rpx 24rpx;\r\n  background: linear-gradient(135deg, #007aff 0%, #5ac8fa 100%);\r\n  border-radius: 24rpx;\r\n  padding: 40rpx 32rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  box-shadow: 0 8rpx 32rpx rgba(0, 122, 255, 0.3);\r\n}\r\n\r\n.status-icon {\r\n  margin-right: 24rpx;\r\n}\r\n\r\n.status-emoji {\r\n  font-size: 48rpx;\r\n}\r\n\r\n.status-info {\r\n  flex: 1;\r\n}\r\n\r\n.status-text {\r\n  display: block;\r\n  font-size: 36rpx;\r\n  font-weight: 600;\r\n  color: #ffffff;\r\n  margin-bottom: 8rpx;\r\n}\r\n\r\n.status-desc {\r\n  font-size: 28rpx;\r\n  color: rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.countdown-container {\r\n  margin-top: 16rpx;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 12rpx;\r\n  padding: 8rpx 16rpx;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.countdown-label {\r\n  font-size: 24rpx;\r\n  color: rgba(255, 255, 255, 0.9);\r\n}\r\n\r\n.countdown-time {\r\n  font-size: 26rpx;\r\n  color: #ffffff;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 卡片通用样式 */\r\n.order-info-card,\r\n.goods-card,\r\n.amount-card {\r\n  margin: 32rpx 24rpx;\r\n  background: #ffffff;\r\n  border-radius: 24rpx;\r\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.06);\r\n  overflow: hidden;\r\n}\r\n\r\n.card-header {\r\n  padding: 32rpx 32rpx 24rpx;\r\n  border-bottom: 1rpx solid #f5f5f7;\r\n}\r\n\r\n.card-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #1d1d1f;\r\n}\r\n\r\n/* 订单信息 */\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24rpx 32rpx;\r\n  border-bottom: 1rpx solid #f5f5f7;\r\n}\r\n\r\n.info-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.info-label {\r\n  font-size: 30rpx;\r\n  color: #8a8a8a;\r\n  font-weight: 400;\r\n}\r\n\r\n.info-value {\r\n  font-size: 30rpx;\r\n  color: #1d1d1f;\r\n  font-weight: 500;\r\n  max-width: 400rpx;\r\n  text-align: right;\r\n  word-break: break-all;\r\n}\r\n\r\n/* 商品信息 */\r\n.goods-list {\r\n  padding: 0 32rpx 32rpx;\r\n}\r\n\r\n.goods-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 24rpx 0;\r\n  border-bottom: 1rpx solid #f5f5f7;\r\n}\r\n\r\n.goods-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.goods-img-container {\r\n  margin-right: 24rpx;\r\n  display: flex;\r\n}\r\n\r\n.goods-img {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n  border-radius: 16rpx;\r\n  background: #f5f5f7;\r\n  border: 1rpx solid #e5e5ea;\r\n}\r\n\r\n.goods-img-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 16rpx;\r\n  background: linear-gradient(135deg, #f5f5f7 0%, #e5e5ea 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 1rpx dashed #d1d1d6;\r\n}\r\n\r\n.placeholder-text {\r\n  font-size: 22rpx;\r\n  color: #8a8a8a;\r\n}\r\n\r\n.goods-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  height: 160rpx;\r\n}\r\n\r\n.goods-name {\r\n  font-size: 32rpx;\r\n  color: #1d1d1f;\r\n  font-weight: 500;\r\n  line-height: 1.4;\r\n}\r\n\r\n.goods-qty {\r\n  font-size: 26rpx;\r\n  color: #8a8a8a;\r\n  background: #f5f5f7;\r\n  padding: 6rpx 12rpx;\r\n  border-radius: 8rpx;\r\n  align-self: flex-start;\r\n}\r\n\r\n/* 费用明细 */\r\n.amount-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24rpx 32rpx;\r\n  border-bottom: 1rpx solid #f5f5f7;\r\n}\r\n\r\n.amount-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.amount-item.total {\r\n  background: #f8f9fa;\r\n  border-top: 2rpx solid #e5e5ea;\r\n}\r\n\r\n.amount-label {\r\n  font-size: 30rpx;\r\n  color: #8a8a8a;\r\n  font-weight: 400;\r\n}\r\n\r\n.amount-item.total .amount-label {\r\n  color: #1d1d1f;\r\n  font-weight: 600;\r\n}\r\n\r\n.amount-value {\r\n  font-size: 30rpx;\r\n  color: #1d1d1f;\r\n  font-weight: 500;\r\n}\r\n\r\n.amount-value.discount {\r\n  color: #34c759;\r\n}\r\n\r\n.amount-value.final {\r\n  font-size: 36rpx;\r\n  color: #ff3b30;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 金额颜色统一规范 */\r\n.refund-amount {\r\n  color: #34c759 !important; /* 退款金额：绿色 */\r\n}\r\n\r\n.paid-amount {\r\n  color: #ff3b30 !important; /* 实付金额：红色 */\r\n}\r\n\r\n/* 操作按钮 */\r\n.action-buttons {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: #ffffff;\r\n  padding: 24rpx 24rpx env(safe-area-inset-bottom);\r\n  box-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n  border-top: 1rpx solid #f5f5f7;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 24rpx;\r\n}\r\n\r\n.action-btn {\r\n  flex: 1;\r\n  height: 88rpx;\r\n  border-radius: 44rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.action-btn.primary {\r\n  background: linear-gradient(135deg, #007aff 0%, #5ac8fa 100%);\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 122, 255, 0.3);\r\n}\r\n\r\n.action-btn.secondary {\r\n  background: #f5f5f7;\r\n  border: 1rpx solid #e5e5ea;\r\n}\r\n\r\n.action-btn:active {\r\n  transform: scale(0.98);\r\n}\r\n\r\n.btn-text {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.action-btn.primary .btn-text {\r\n  color: #ffffff;\r\n}\r\n\r\n.action-btn.secondary .btn-text {\r\n  color: #1d1d1f;\r\n}\r\n\r\n/* 响应式适配 */\r\n@media (max-width: 750rpx) {\r\n  .goods-img,\r\n  .goods-img-placeholder {\r\n    width: 140rpx;\r\n    height: 140rpx;\r\n  }\r\n  \r\n  .goods-info {\r\n    height: 140rpx;\r\n  }\r\n  \r\n  .goods-name {\r\n    font-size: 30rpx;\r\n  }\r\n  \r\n  .status-card {\r\n    padding: 32rpx 24rpx;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from '/Users/wangshuli/workspace/mine/pighand/pighand-AIO/client-applet/pages/ECommerce/pages/order-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","orderAPI","onLoad","Decimal","onUnmounted"],"mappings":";;;;;;;;;;;;;;AAgHA,UAAM,cAAcA,cAAG,IAAC,EAAE;AAC1B,UAAM,UAAUA,cAAG,IAAC,KAAK;AACzB,UAAM,WAAWA,cAAG,IAAC,KAAK;AAG1B,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAC5B,QAAI,iBAAiB;AAGrB,UAAM,oBAAoBC,cAAQ,SAAC,MAAM;AAEvC,UAAI,YAAY,MAAM,gBAAgB,IAAI;AAExC,YAAI,YAAY,MAAM,WAAW;AAC/B,gBAAM,OAAM,oBAAI,KAAM,GAAC,QAAS;AAChC,gBAAM,cAAc,IAAI,KAAK,YAAY,MAAM,SAAS,EAAE,QAAS;AACnE,iBAAO,MAAM;AAAA,QACd;AACD,eAAO;AAAA,MACR;AACD,aAAO;AAAA,IACT,CAAC;AAGD,aAAS,WAAW,WAAW;AAC7B,UAAI,CAAC;AAAW,eAAO;AACvB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,YAAM,OAAO,KAAK,YAAa;AAC/B,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACzD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IACpD;AAGA,aAAS,yBAAyB,OAAO,UAAU;;AACjD,UAAI,CAAC,MAAM,oBAAoB;AAC7B,cAAM,qBAAqB,oBAAI,IAAK;AACpC,oBAAM,aAAN,mBAAgB,QAAQ,SAAO;AAC7B,cAAI,IAAI,UAAU;AAChB,kBAAM,mBAAmB,IAAI,IAAI,UAAU,IAAI,YAAY,CAAC;AAAA,UAC7D;AAAA,QACP;AAAA,MACG;AACD,aAAO,MAAM,mBAAmB,IAAI,QAAQ,KAAK;AAAA,IACnD;AAKA,aAAS,cAAc,aAAa;AAClC,YAAM,YAAY;AAAA,QAChB,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,MACL;AACD,aAAO,UAAU,WAAW,KAAK;AAAA,IACnC;AAGA,aAAS,cAAc,aAAa;AAClC,YAAM,YAAY;AAAA,QAChB,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,MACL;AACD,aAAO,UAAU,WAAW,KAAK;AAAA,IACnC;AAGA,aAAS,YAAY,SAAS;AAC5BC,oBAAAA,MAAI,iBAAiB;AAAA,QACnB,MAAM;AAAA,QACN,SAAS,MAAM;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UAClB,CAAO;AAAA,QACF;AAAA,QACD,MAAM,MAAM;AACVA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UAClB,CAAO;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,aAAS,iBAAiB,IAAI;AAC5B,UAAI,CAAC;AAAI;AAET,cAAQ,QAAQ;AAChB,aAAOC,UAAQ,SAAC,KAAK,EAAE,EAAE,KAAK,SAAO;AACnC,oBAAY,QAAQ,OAAO,CAAE;AAE7B,YAAI,YAAY,MAAM,gBAAgB,IAAI;AACxC,yBAAgB;AAAA,QACjB;AACD,eAAO;AAAA,MACX,CAAG,EAAE,MAAM,SAAO;AACdD,sBAAAA,MAAA,MAAA,SAAA,iDAAc,aAAa,GAAG;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAChB,CAAK;AAAA,MACL,CAAG,EAAE,QAAQ,MAAM;AACf,gBAAQ,QAAQ;AAAA,MACpB,CAAG;AAAA,IACH;AAGA,UAAM,WAAW,YAAY;AAC3B,UAAI,SAAS,SAAS,QAAQ;AAAO;AAErC,eAAS,QAAQ;AACjB,cAAQ,QAAQ;AAEhB,UAAI;AACF,cAAM,SAAS,MAAMC,UAAAA,SAAS,IAAI,YAAY,MAAM,IAAI,eAAe;AAEvE,cAAM,EAAE,UAAU,UAAU,UAAU,SAAS,UAAW,IAAG;AAC7DD,sBAAAA,MAAI,eAAe;AAAA,UACjB,UAAS;AAAA,UACT;AAAA,UACA;AAAA,UACA,SAAQ,aAAa,QAAQ;AAAA,UAC7B;AAAA,UACA;AAAA,UACA,QAAQ,cAAc;AACpB,qBAAS,QAAQ;AACjB,oBAAQ,QAAQ;AAEhB,gBAAG,aAAa,WAAW,qBAAoB;AAC7CA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,cACtB,CAAW;AAED,yBAAW,MAAM;AACf,iCAAiB,YAAY,MAAM,EAAE;AAAA,cACtC,GAAE,GAAI;AAAA,YACjB,OAAa;AACHA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,cACtB,CAAW;AAAA,YACF;AAAA,UACF;AAAA,UACD,KAAK,OAAO;AACV,qBAAS,QAAQ;AACjB,oBAAQ,QAAQ;AAEhBA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,cACN,UAAU;AAAA,YACpB,CAAS;AAAA,UACF;AAAA,QACP,CAAK;AAAA,MACF,SAAQ,OAAO;AACd,iBAAS,QAAQ;AACjB,gBAAQ,QAAQ;AAEhBA,sBAAAA,sEAAc,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAChB,CAAK;AAAA,MACF;AAAA,IACH;AAGA,aAAS,cAAc;AACrBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AACf,gBAAI;AACF,sBAAQ,QAAQ;AAChB,oBAAMC,UAAQ,SAAC,OAAO,YAAY,MAAM,EAAE;AAE1CD,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,cACtB,CAAW;AAGD,yBAAW,MAAM;AACfA,8BAAAA,MAAI,aAAc;AAAA,cACnB,GAAE,GAAI;AAAA,YACR,SAAQ,OAAO;AACdA,4BAAAA,MAAc,MAAA,SAAA,iDAAA,WAAW,KAAK;AAC9BA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,gBACN,UAAU;AAAA,cACtB,CAAW;AAAA,YACX,UAAkB;AACR,sBAAQ,QAAQ;AAAA,YACjB;AAAA,UACF;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,aAAS,iBAAiB;AAExB,UAAI,gBAAgB;AAClB,sBAAc,cAAc;AAC5B,yBAAiB;AAAA,MAClB;AAGD,UAAI,YAAY,MAAM,gBAAgB,MAAM,CAAC,YAAY,MAAM,WAAW;AACxE,sBAAc,QAAQ;AACtB;AAAA,MACD;AAGD,YAAM,kBAAkB,MAAM;AAC5B,cAAM,OAAM,oBAAI,KAAM,GAAC,QAAS;AAChC,cAAM,cAAc,IAAI,KAAK,YAAY,MAAM,SAAS,EAAE,QAAS;AACnE,cAAM,OAAO,cAAc;AAE3B,YAAI,QAAQ,GAAG;AAEb,wBAAc,QAAQ;AACtB,wBAAc,cAAc;AAC5B,2BAAiB;AAEjB,2BAAiB,YAAY,MAAM,EAAE;AACrC;AAAA,QACD;AAGD,cAAM,QAAQ,KAAK,MAAM,QAAQ,MAAO,KAAK,GAAG;AAChD,cAAM,UAAU,KAAK,MAAO,QAAQ,MAAO,KAAK,OAAQ,MAAO,GAAG;AAClE,cAAM,UAAU,KAAK,MAAO,QAAQ,MAAO,MAAO,GAAI;AAGtD,sBAAc,QAAQ,GAAG,MAAM,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,WAAW,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,MACzI;AAGD,sBAAiB;AAGjB,uBAAiB,YAAY,iBAAiB,GAAI;AAAA,IACpD;AAGAE,kBAAM,OAAC,CAAC,YAAY;AAClB,UAAI,WAAW,QAAQ,IAAI;AACzB,yBAAiB,QAAQ,EAAE,EAAE,KAAK,MAAM;AAEtC,yBAAgB;AAAA,QACtB,CAAK;AAAA,MACL,OAAS;AACLF,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,UACN,UAAU;AAAA,QAChB,CAAK;AACD,mBAAW,MAAM;AACfA,wBAAAA,MAAI,aAAc;AAAA,QACnB,GAAE,GAAI;AAAA,MACR;AAAA,IACH,CAAC;AAGD,aAAS,aAAa,eAAe;AACnC,UAAI,CAAC,iBAAiB,kBAAkB;AAAG,eAAO;AAClD,aAAO,IAAIG,cAAO,QAAC,aAAa,EAAE,IAAI,GAAG,EAAE,QAAQ,CAAC;AAAA,IACtD;AAGAC,kBAAAA,YAAY,MAAM;AAChB,UAAI,gBAAgB;AAClB,sBAAc,cAAc;AAC5B,yBAAiB;AAAA,MAClB;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnZD,GAAG,WAAW,eAAe;"}